!function(a,b,c,d){var e=function(a){return a=a?a:[],new e.prototype.init(a)};e.prototype={init:function(a){return a?e.merge(this,Array.prototype.slice.call(a)):e.merge(this,[]),this},toArray:function(){return Array.prototype.slice.call(this)},get:function(a){return a==d?this.toArray():a>=0?this[a]:this[this.length+a]},eq:function(a){return e(this.get(a))},add:function(a,b){return"string"===e.type(a)&&(a=JSON.parse(a)),this[this.length++]=a,b&&b(a),this},del:function(a,b,c){"function"===e.type(b)&&(c=b,b=1);var d=e.splice(this,a,b);return c&&c(d),e(d)},search:function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)this[d][a].toString()===b.toString()&&c.push(this[d]);return c},length:0,splice:Array.prototype.splice},e.merge=function(a,b){for(var c=+b.length,d=0,e=+a.length;c>d;)a[e++]=b[d++];return a.length=e,a},e.type=function(){return Object.prototype.toString.call({}).slice(8,-1).toLowerCase()},e.splice=function(a,b,c){return Array.prototype.splice.call(a,b,c)},e.prototype.init.prototype=e.prototype,a.List=e}(window,document,jQuery);var Show=function(a,b,c){var d=List(),e=c(".news-container"),f=c(".old-container"),g=function(a){return c('<li class="news-item clearfix" data-mid='+a.mid+'><p class="time">'+a.time+'</p><p class="content">'+(a.content.length>100?a.content.slice(0,98)+"...":a.content)+'</p><p class="author">'+a.author+"</p></li>")},h=function(a){return c('<li class="old-item clearfix" data-mid='+a.mid+'><p class="content">'+a.content+'</p><p class="author">'+a.author+"</p></li>")},i=function(a,b,d){d=d?parseInt(d):0;for(var e,f=0,g="string"==typeof a?c(a):a,h="string"==typeof b?c(b):b,i=g.height()+parseInt(g.css("padding-top"))+parseInt(g.css("padding-bottom"))+d,j=0,k=h.length;k>j&&(e=h.eq(j),f+=e.height()+parseInt(e.css("padding-top"))+parseInt(e.css("padding-bottom"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom")),i>f);j++);return h.slice(j)},j=function(a,b){return d.add(a,function(){var j=g(a);e.find("ul.news-list").prepend(j.css("display","none")),j.slideDown().promise().done(function(){var g=i(e,".news-item",-28),j=[];g.each(function(a,b){msg=d.search("mid",c(b).data("mid")),c.merge(j,h(msg[0]))}),g.fadeOut(function(){g.remove()}),f.find("ul.old-list").prepend(c(j).css("display","none")),c(j).slideDown(),b&&b(a)})}),this},k=function(a,b){d.add(a,function(){var c=g(a);e.find("ul.news-list").prepend(c.css("display","none")),c.slideDown(),b&&b(a)})},l=function(){var a=i(".old-container",".old-item");if(!a.length)return this;var b=f.find(".old-item").first();return b.toggle(function(){b.appendTo(f.find("ul.old-list")),f.find(".old-item").fadeIn()}),this},m=function(a,b){if(a.forEach(function(a){d.add(a,function(){e.find("ul.news-list").append(g(a))})}),b){var j=i(e,".news-item",-28),k=[];j.each(function(a,b){msg=d.search("mid",c(b).data("mid")),c.merge(k,h(msg[0]))}),j.remove(),f.find("ul.old-list").prepend(c(k))}return this};return{getMsgList:function(){return d},init:m,add:k,append:j,roll:l}}(window,document,jQuery)(function(a,b,c){function d(){c.ajax({url:"/getnotice",success:function(a){err=!1,a.forEach(function(a){Show.append(a)}),d()},error:function(){err=!0},complete:function(){err?setTimeout(function(){d()},5e3):d()}})}d()})(window,document,jQuery);